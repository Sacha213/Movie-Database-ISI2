
## Installation :

* #### Cloner le projet dans votre r√©pertoire
	`git clone https://forge.univ-lyon1.fr/p1911249/movie-database-isi2 Netflix`
* #### Cr√©er un utilisateur

	> Il suffit de lancer le script **createUser.sql** dans datagrip.

* #### Modifier le fichier env

	> Se d√©placer dans le dossier **netflix** puis copier-coller le fichier **.env.example** en le renommant **.env**. 
	>Modifier le fichier **.env** comme ci-dessous.
	
	![env](resources/env.png)
* #### Actualiser la cl√© du projet
	`php artisan key:generate`
* #### Cr√©er les migrations

	> Lancer la commande suivante :
	
	`php artisan migrate`
* #### Ins√©rer les donn√©es dans la base de donn√©e

	> Lancer le script **netflix.sql** dans datagrip.
	
* #### Lancer le serveur local
	`sudo service mysql start`
	`sudo service apache2 start`
* #### V√©rifier que tout fonctionne üòâ

	> Aller √† l'adresse http://localhost/web/Netflix/netflix/public/home
  
    
    
## Introduction :


Nous avons choisi de faire une copie de Netflix. Ainsi, notre site web regroupe diff√©rents films et s√©ries du service de streaming. L‚Äôutilisateur pourra ainsi parcourir le contenu propos√© sur notre site, et acc√©der √† ces informations.
Nous avons choisi un jeu de donn√©es provenant du site [kaggle](https://www.kaggle.com/datasets/shivamb/netflix-shows) et regroupant les informations dont nous avons besoin. Par la suite, nous avons d√ª traiter ce jeu √† l‚Äôaide de scripts python, en le s√©parant en 7 fichiers **csv**, chacun repr√©sentant une table de notre base de donn√©es afin de pouvoir l‚Äôimporter par la suite. De plus le jeu de donn√©es √©tant relativement important (+8000 show), nous avons choisi de nous restreindre √† 150 shows.
Notre base de donn√©es contient quant √† elle 7 tables, repr√©sent√©es ci-dessous.
![base de donn√©es](resources/tables.png)

## Description des tables :

* La table **show** contient les informations du show.
* La table **genres** contient les diff√©rentes cat√©gories que peut avoir un show (ex : Horreur).
* La table **acteurs** contient les acteurs ayant jou√© dansdes shows.
* La table **directeurs** contient les directeurs ayantdirig√© des shows.
* La table **types** contient les deux types que peuventprendre un show (TV show ou Movie).
* Les tables **appartenances** et **participations** permettentde lier les tables acteurs et genres avec la table shows afin d‚Äôavoir des relations 1..n au lieu de n..n.

  

## Le fonctionnement du site :

  

La page d‚Äôaccueil est la suivante, elle permet d‚Äôafficher les films et s√©ries de 3 genres diff√©rents, les anim√©s, les films romantiques et les films d‚Äôhorreur. 
![home page](resources/home.png)

Nous voyons √©galement notre barre de navigation accueillant 3 liens de navigation ainsi que ceux de connexion que nous d√©taillerons par la suite. Cette barre est pr√©sente sur toutes les pages du site grace aux layouts. Si nous cliquons sur le lien ‚ÄúFilms‚Äù nous acc√©dons √† une page regroupant tous les films de la base de donn√©es.
![movies](resources/movies.png)

De m√™me pour le lien ‚ÄúS√©ries‚Äù:
![series](resources/series.png)
  
Si nous cliquons sur un film sans √™tre connect√©, on nous propose de nous connecter pour acc√©der au contenu du programme.
![auth](resources/auth.png)
  
Cliquons alors sur le lien ‚ÄúSe connecter‚Äù.
![login](resources/login.png)

On remarque dans la barre de navigation que l'utilisateur est bien connect√© car son nom appara√Æt.
![logged](resources/logged.png)
  
Nous pouvons donc cliquer sur un film pour acc√©der √† son contenu.
![show](resources/show.png)
  
A partir de cette vue nous pouvons acc√©der √† la page des acteurs en cliquant le nom d‚Äôun de ces derniers. On clique ici sur l‚Äôactrice ‚ÄúChie Nakamura‚Äù, on a donc acc√®s √† tous les films dans lesquels elle √† jou√©.
![acteur](resources/acteur.png)
  
En revenant sur la page de contenu d‚Äôun programme on peut cliquer sur un des ‚ÄúGenres‚Äù pour acc√©der √† la page contenant tous les films appartenant √† ce genre. Ici nous avons cliqu√© sur le genre ‚ÄúInternational Movies‚Äù.
![genre](resources/genre.png)

## Les mod√®les :

Nous avons 8 mod√®les Acteur, Appartenance, Directeur, Genre, Participation, Show, Type et User. Chacun d'eux est li√©e √† une table de notre base de donn√©es. Voici la repr√©sentation de nos mod√®les dans Laravel.


## Les vues :

Nous utilisons un seul layout ‚ÄúhomeLayout.blade.php‚Äù, les autres sont ceux cr√©√©s automatiquement par laravel. Il permet de d√©finir pour toutes les vues la m√™me structure de page, c'est-√†-dire la navbar et le footer.
Nous avons 6 vues et chacune d‚Äôelle est associ√©e √† une page du site:

* La vue **acteurs** permet d‚Äôafficher les film d‚Äôun acteur.
* La vue **genres** permet d‚Äôafficher les films d‚Äôun m√™megenre.
* La vue **index** est la page d‚Äôaccueil qui affiche plusieurs films de notre BD.
* La vue **movies** permet d‚Äôafficher tous les films dela BD.
* La vue **show** permet d‚Äôafficher les informations d‚Äôunshow.
* La vue **tv** permet d‚Äôafficher toutes les s√©ries de laBD.
 

## Les contr√¥leurs :


Nous avons cr√©√© 7 contr√¥leurs : ActeurController, DirecteurController, GenreController, MovieController, ShowController, TvController, TypeController.

  

 * Le contr√¥leur **show** a deux m√©thodes. 
	* La m√©thode *index* renvoie trois types de show diff√©rents, des animes, des horreurs et des romantiques.
	* La m√©thode *show* qui prend en param√®tre l‚Äôid d‚Äôun show. Et qui renvoie toutes les informations li√©e √† celui-ci (acteurs, directeurs, descriptions, nom, ...).
* Le contr√¥leur **acteur** a une m√©thode *show* prenant enparam√®tre l‚Äôid d‚Äôun film. Afin de nous permettre de r√©cup√©rer tous les acteurs qui ont jou√© dans ce film. 
* Le contr√¥leur **genre** a une m√©thode *show* qui prend en param√®tre l‚Äôid d‚Äôun film. Et qui retourne les films ayant le m√™me genre que celui pass√© en param√®tre.
* Le contr√¥leur **TV** √† une m√©thode index qui r√©cup√®retous les show ayant le type 2 (TV show).
* Le contr√¥leur **Movie** √† une m√©thode index qui renvoietous les films de la base de donn√©es.

  
  

## Les routes :

  

Voici nos 7 routes, associ√©es √† chacune des pages de notre site. 
![routes](resources/routes.png)

Les deux premi√®res servent √† afficher la page d‚Äôaccueil. les 4 suivantes affichent leur page √©ponymes. Enfin la derni√®re permet de g√©rer l‚Äôauthentification.

## Les migrations :

Les fichiers de migrations sont disponible dans le fichier suivant:
`netflix/database/migrations`

  
## Les √©tapes du d√©veloppement :

#### Etape 1 : Cr√©ation du jeu de donn√©es

* Les donn√©es sont d√©j√† trait√©es et se trouvent √† cette adresse : https://drive.google.com/drive/folders/1GBvPxFjbS2b6-ORUMNDf-oPY7trhv2xp?usp=sharing
    
#### Etape 2 : Cr√©ation des model

* php artisan make:model Acteur --migration
* php artisan make:model Appartenance --migration
* php artisan make:model Directeur --migration
* php artisan make:model Genre --migration
* php artisan make:model Participation --migration
* php artisan make:model Show --migration  
* php artisan make:model Type --migration
   
#### Etape 3 : Cr√©ation des migrations

* Les fichiers migrations sont disponibles dans le r√©pertoire netflix/database/migrations/
 

#### Etape 4 : Insertion du jeu de donn√©es dans la BD

* Il faut utiliser le fichier d‚Äôinsertion de donn√©es netflix.sql
    
#### Etape 5 : Cr√©ation des contr√¥leurs

* La plupart des contr√¥leurs sont d√©j√† cr√©√©s. Cependant, certains sont √† impl√©menter. Puis, il faudra ajouter les m√©thodes correspondantes √† chacun des contr√¥leurs, disponibles dans le r√©pertoire netflix/app/Http/Controllers
    
#### Etape 6 : Cr√©ation des vues et des templates

* Les vues et les templates sont disponibles dans le r√©pertoire suivant, netflix/resources/views
   
#### Etape 7 : Cr√©ation des routes

* Les routes sont disponibles dans le fichier suivant netflix/routes/web.php.